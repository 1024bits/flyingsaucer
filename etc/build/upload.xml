<project name="build.upload">
    <target name="upload.dist" description="Upload distributions" depends="properties, check.app.version">
        <fail message="Need property dist.upload.username, specify with -Ddist.upload.username">
            <condition>
                <not>
                    <isset property="dist.upload.username"/>
                </not>
            </condition>
        </fail>
        <fail message="Need property dist.upload.password, specify with -Ddist.upload.password">
            <condition>
                <not>
                    <isset property="dist.upload.password"/>
                </not>
            </condition>
        </fail>

        <property file="local.build.properties" />
        <scp todir="${dist.upload.username}:${dist.upload.password}@${dist.upload.hostname}:${dist.upload.path}"
                verbose="true"
                port="7822">
            <fileset dir="${dist.dir}/demo_repo">
                <include name="**/*"/>
            </fileset>
            <fileset dir="${dist.dir}/${app.version}">
                <include name="**/*"/>
            </fileset>
        </scp>
    </target>
</project>
